<?xml version="1.0" encoding="utf-8" ?>
<controls:CardView
    x:Class="CrossPlatformLibrary.Forms.Controls.DrilldownButton"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:CrossPlatformLibrary.Forms.Controls;assembly=CrossPlatformLibrary.Forms"
    x:Name="Control">

    <controls:CardView.Margin>
        <OnPlatform
            x:TypeArguments="Thickness"
            Android="0, 8, 0, 0"
            WinPhone="0, 16, 0, 0"
            iOS="0, 16, 0, 0" />
    </controls:CardView.Margin>

    <controls:CardView.Padding>
        <OnPlatform
            x:TypeArguments="Thickness"
            Android="0"
            WinPhone="0, 16, 0, 4"
            iOS="0, 24, 0, 4" />
    </controls:CardView.Padding>

    <controls:StackLayoutZero>
        <controls:HeaderDivider />
        <Grid BackgroundColor="White">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <controls:CustomButton
                HorizontalContentAlignment="Start"
                VerticalContentAlignment="Center"
                AllCaps="False"
                BackgroundColor="Transparent"
                BackgroundColorPressed="{DynamicResource WindowBackground}"
                BorderColor="Transparent"
                BorderColorPressed="Transparent"
                Command="{Binding Command, Source={x:Reference Control}, Mode=OneWay}"
                CommandParameter="{Binding CommandParameter, Source={x:Reference Control}, Mode=OneWay}"
                CornerRadius="0"
                FontAttributes="None"
                FontSize="{DynamicResource LargeSize}"
                HorizontalOptions="FillAndExpand"
                IsEnabled="{Binding IsEnabled, Source={x:Reference Control}, Mode=OneWay}"
                Style="{DynamicResource CustomButtonStyle}"
                Text="{Binding Text, Source={x:Reference Control}, Mode=OneWay}"
                TextColor="{DynamicResource DrilldownButtonStyle.TextColor}"
                VerticalOptions="StartAndExpand">

                <controls:CustomButton.Margin>
                    <OnPlatform x:TypeArguments="Thickness">
                        <On Platform="Android" Value="-1" />
                    </OnPlatform>
                </controls:CustomButton.Margin>

                <controls:CustomButton.Padding>
                    <OnPlatform x:TypeArguments="Thickness">
                        <On Platform="Android" Value="8, 0, 0, 0" />
                        <On Platform="iOS" Value="16, 0, 0, 0" />
                    </OnPlatform>
                </controls:CustomButton.Padding>

            </controls:CustomButton>

            <Image
                Margin="0,0,8,0"
                HeightRequest="24"
                HorizontalOptions="EndAndExpand"
                Source="{Binding ImageSource, Source={x:Reference Control}, Mode=OneWay}"
                VerticalOptions="CenterAndExpand"
                WidthRequest="24" />

            <ActivityIndicator
                x:Name="ActivityIndicator"
                Margin="0,0,8,0"
                HorizontalOptions="EndAndExpand"
                IsRunning="{Binding IsBusy, Source={x:Reference Control}, Mode=OneWay}"
                IsVisible="{Binding IsBusy, Source={x:Reference Control}, Mode=OneWay}"
                VerticalOptions="CenterAndExpand"
                WidthRequest="24" />

            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding Command, Source={x:Reference Control}, Mode=OneWay}" CommandParameter="{Binding CommandParameter, Source={x:Reference Control}, Mode=OneWay}" />
            </Grid.GestureRecognizers>
        </Grid>
        <controls:FooterDivider />
    </controls:StackLayoutZero>
</controls:CardView>